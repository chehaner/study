#### 手写订阅发布模式
```javascript
class EventEmitter{
    constructor(){
        this.events = {};
    }
    on(eventName, callback){
        if(!this.events[eventName]){
            this.events[eventName] = [];
        }
        // 注册时，将订阅者加进事件列表，以便发布时可以触发
        this.events[eventName].push(callback);
    }
    emit(eventName, data){
        // 找找对应要触发的订阅者
        const callbacks = this.events[eventName];
        if(this.events[eventName]){
            // 可能有多个，依次触发
            callbacks.forEach((callback)=>{
                callback(data);
            })
        }
    }
    off(eventName, callback){
        // 找找对应要触发的订阅者
        const callbacks = this.events[eventName];
        // 把要销毁的订阅者删掉
        if(callbacks){
            this.events[eventName] = callbacks.filter(
                fn => fn !== callback
            )
        }
    }
}
const emitter = new EventEmitter()
const onMessage = (message) => {
    console.log(`收到消息：${message}`);
}
emitter.on('onMessage', onMessage)
emitter.emit('onMessage', '这是一条信息1')
emitter.off('onMessage', onMessage)
emitter.emit('onMessage', '这是一条信息2')
```

#### 手写hardman
```javascript
class Hardman{
    constructor(name){
        this.name = name;
        this.tasks = [];
        setTimeout(()=>{
            this.next();
        }, 0);
    }
    next(){
        if(this.tasks.length>0){
            const task = this.tasks.shift();
            task();
        }
    }
    rest(time){
        this.tasks.push(()=>{
            console.log(`Resting ${time}`);
            setTimeout(()=>this.next(), time*1000);
        })
        return this;
    }
    learn(skill){
        this.tasks.push(()=>{
            console.log(`Learning ${skill}`)
            this.next();
        })
        return this;
    }
}
function hardman(name) {
  return new Hardman(name);
}
hardman('Tom').rest(2).learn('JavaScript').rest(1).learn('Vue');
```